<%= form_for(@article) do |f| %>
	<% @article.errors.full_messages.each do |message| %>
		<div class="red message white-text medium-text small-margin-bottom small-border-radius">
			<%= message %>
		</div>
	<%end%>
	<% if @article.cover? %>
		<div class="large-margin-bottom">
			<%= image_tag @article.cover.url, class:"cover" %>
		</div>
	<%end%>

	<div class="large-margin-bottom">
		Portada: <%= f.file_field :cover%> 
	</div>
	<div class="large-margin-bottom">
		<%= f.text_field :title, placeholder: "Título", id: 'myTextarea', class:"input" %>
		<p id="counter"></p>
	</div>
	<div class="large-margin-bottom">
		<%= f.trix_editor :body, placeholder: "Cuerpo del artículo" , style:"min-height:200px;", class:"input" %>
	</div>
	<div class="row full center left-text large-margin-bottom">
		<% if @article.categories.empty? %>
			<div class="col-md-12 small-margin-bottom border-bottom small-padding-bottom center-text">
				Categorías
			</div>
			<% @categories.each do |category| %>
				<div class="col-md-6 col-sm-6 small-margin-top small-margin-bottom">
					<%= check_box_tag "categories[]", category.id %>
					<%= category.title %>
				</div>
			<%end%>	
		<%end%>
	</div>

	<div>
		<%= f.submit "Guardar", class:"save-article btn blue small-border-radius" %>
	</div>
<%end%>

<script type="text/javascript">
		$('#myTextarea').keyup(function () {
	    var left = 200 - $(this).val().length;
	    if (left < 0) {
	        left = 0;
	    }
	    $('#counter').text('Characters left: ' + left);
	    if (left < 100) { $("#counter").css('opacity', '0.4').css('color', 'red'); $(".save-article").attr('disabled', 'disabled'); } else { $("#counter").css('opacity', '1').css('color', 'black'); $(".save-article").removeAttr('disabled'); }
        if (left < 150) { $("#counter").css('color', 'red'); } else { $("#counter").css('color', 'black'); }
	});
</script>
