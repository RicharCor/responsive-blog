<div class="fluid-container" style="margin-top: 90px;">
    <div class="row">
        <div class="col-sm-2" style="position: fixed; top: 70px; left: 0;">
            <% if user_signed_in? %>
                <h4>Chatrooms</h4>
                <ul>
                    <% current_user.chatrooms.each do |chatroom| %>
                        <li>
                            <%= link_to chatroom.name, chatroom, data: {behavior: "chatroom-link", chatroom_id: chatroom.id } %>
                        </li> 
                    <%end%>   
                </ul>
            <%end%>    
        </div>

        <div class="col-sm-10 col-sm-offset-2">
            <h1>Chatrooms</h1>

            <% if @chatrooms.nil? %>
                No hay salas de chat, crea una!
            <%end%>

            <% @chatrooms.reverse.each do |chatroom| %>
                <%= chatroom.name %>
                Creado por <%= chatroom.user_id %>
                Hace <%= time_ago_in_words(chatroom.created_at) %>

                <div>
                    <% if user_signed_in? %>
                        <%= link_to 'Entrar', chatroom_chatroom_users_path(chatroom), method: :post %>
                        <%= link_to 'Salir', chatroom_chatroom_users_path(chatroom), method: :delete %>

                        <% if current_user.id == chatroom.user_id %>
                            <%= link_to 'Editar', edit_chatroom_path(chatroom) %>
                            <%= link_to 'Eliminar', chatroom, method: :delete, data: { confirm: 'Are you sure?' } %>
                        <%end%> 
                    <%end%> 
                </div>
            <% end %>

            <br>
            
            <% if user_signed_in? %>
                <%= link_to 'New Chatroom', new_chatroom_path %>
            <%else%>
                Tienes que iniciar sesiÃ³n para crear/entrar a un chat
            <%end%>
        </div>        
    </div>    
</div>

